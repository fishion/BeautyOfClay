(()=>{"use strict";const e=JSON.parse('{"Zd":{"recaptcha2-site-secret":"6LdOWmkaAAAAAAXH3BvOKcI2wrq53-qq3bjtSR2s","contactUsAPI":"https://api.maytreehousestudios.co.uk/contact-us","siteKey":"beautyofclay","expectedFormData":[{"name":"name","niceName":"Name"},{"name":"email","niceName":"Email","validation":{"type":"email","error":"Please enter a valid Email Address"},"required":"No email address provided"},{"name":"whereHear","niceName":"Where did you hear about us"},{"name":"message","niceName":"Message","required":"Please enter your message to us here"}]}}');!function(e,t,{contentClass:a=!0,recaptcha:r=!0}={}){const n=function(e,t){function a(){const t=e.getElementsByTagName("input"),a=e.getElementsByTagName("textarea");return[...Array.from(t),...Array.from(a)].reduce((e,t)=>({[t.name]:t.value,...e}),{})}function r(e){const t=document.getElementById("form_generalError");t&&("string"==typeof e?t.appendChild(n(`Error : ${e}`,"error")):(t.appendChild(n("Please check errors below","error")),Object.keys(e).forEach(t=>{const a=document.getElementById(`formField_${t}`);a&&a.appendChild(n(e[t],"error"))})))}function n(e,t){const a=document.createElement("p");return a.classList.add(t),a.textContent=e,a}return{afterSubmit:()=>{},addContentClass:function(){e.addEventListener("keyup",e=>{const t=e.target;t.value.match(/[^\s]/)?t.classList.add("hascontent"):t.classList.remove("hascontent")})},validate:function(){!function(){const t=e.getElementsByClassName("error"),a=e.getElementsByClassName("success");Array.from(t).concat(Array.from(a)).forEach(e=>e.remove())}();const[,n]=function(e,t){const a={},r=[];return t.forEach(t=>{if(e[t.name]){switch(t.validation?.type){case"email":e[t.name].match(/.*@.*\..*/)||(a[t.name]=t.validation.error);break;case void 0:break;default:{const e=t.validation?.type;throw new Error(`Validation type '${e}' not defined`)}}r.push(`${t.niceName||t.name} : ${e[t.name]}`)}else t.required&&(a[t.name]=t.required)}),[r,a]}(a(),t.expectedFormData);return!Object.keys(n).length||(r(n),!1)},submitForm:async function(){const c=a(),o=await fetch(t.contactUsAPI,{headers:{"Content-Type":"application/json"},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify({siteKey:t.siteKey,...c})}),s=await o.json();400===o.status?r(s.error):200===o.status&&(function(){const e=document.getElementById("form_generalError");e&&e.appendChild(n("Message received - Thank you!","success"))}(),function(){const t=e.getElementsByTagName("input"),a=e.getElementsByTagName("textarea");[...Array.from(t),...Array.from(a)].forEach(e=>{e.value="",e.classList.remove("hascontent")})}())}}}(e,t),c=e.getElementsByTagName("button")[0];if(!c)throw new Error("Form must contain a button element");a&&n.addContentClass(),r?window.initForm=()=>{const a=t["recaptcha2-site-secret"];if(!a)throw new Error("recaptcha2-site-secret is required when recaptcha is enabled");const r=function(e,t){return{addRecaptcha:function(a){const r=document.createElement("div");if(r.classList.add("g-recaptcha"),e.appendChild(r),!window.grecaptcha)throw new Error("grecaptcha is not loaded. Make sure to load the reCAPTCHA script.");return window.grecaptcha.render(r,{sitekey:t,size:"invisible",badge:"bottomright",callback:a})}}}(e,a);n.afterSubmit=()=>{window.grecaptcha&&window.grecaptcha.reset()};const o=r.addRecaptcha(()=>{n.submitForm()});c.addEventListener("click",()=>{n.validate()&&window.grecaptcha&&window.grecaptcha.execute(o)})}:c.addEventListener("click",()=>{n.validate()&&n.submitForm()})}(document.getElementsByTagName("form")[0],e.Zd)})();